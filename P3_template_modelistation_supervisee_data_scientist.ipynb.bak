{"cells": [{"cell_type": "markdown", "id": "a978f2c7", "metadata": {}, "source": ["# Projet 3 "]}, {"cell_type": "markdown", "id": "38ef8d9c", "metadata": {}, "source": ["### Mission\n", "\n", "Vous travaillez en tant que Data Scientist pour la ville de Seattle. Pour atteindre son objectif de ville neutre en \u00e9missions de carbone en 2050, votre \u00e9quipe s\u2019int\u00e9resse de pr\u00e8s \u00e0 la consommation et aux \u00e9missions des b\u00e2timents non destin\u00e9s \u00e0 l\u2019habitation.\n"]}, {"cell_type": "markdown", "id": "b3c3b0c5", "metadata": {}, "source": ["### Le Dataset \n", "\n", "Des relev\u00e9s minutieux ont \u00e9t\u00e9 effectu\u00e9s par les agents de la ville en 2016. Voici les donn\u00e9es et leur source. Ces relev\u00e9s sont co\u00fbteux \u00e0 obtenir, et \u00e0 partir de ceux d\u00e9j\u00e0 r\u00e9alis\u00e9s, vous voulez tenter de pr\u00e9dire les \u00e9missions de CO2 et la consommation totale d\u2019\u00e9nergie de b\u00e2timents non destin\u00e9s \u00e0 l\u2019habitation pour lesquels elles n\u2019ont pas encore \u00e9t\u00e9 mesur\u00e9es."]}, {"cell_type": "markdown", "id": "5a4e3b51", "metadata": {}, "source": ["### Objectif \n", "Le Project Lead Douglas vous convie par message \u00e0 une r\u00e9union de kick-off :\n", "\n", " \n", "\n", "Comme tu le sais, ce genre de projet est men\u00e9 en g\u00e9n\u00e9ral par ta coll\u00e8gue Data Scientist L\u00e9a. Sauf qu\u2019elle va partir en cong\u00e9 maternit\u00e9 \u00e0 partir de la semaine prochaine. Ce projet a une tr\u00e8s haute visibilit\u00e9 en ce moment aupr\u00e8s de la mairie de Seattle et nous ne pouvons pas attendre son retour pour commencer \u00e0 travailler dessus. \n", "\n", " \n", "\n", "Afin de t\u2019aider, je me suis coordonn\u00e9 avec L\u00e9a pour qu\u2019elle te facilite le travail en te pr\u00e9parant un notebook avec un template de la d\u00e9marche \u00e0 suivre et des conseils pour \u00e9viter certains pi\u00e8ges. Dans l\u2019ensemble, j\u2019attends de toi :\n", "\n", "une courte analyse exploratoire pour faire ressortir des insights cl\u00e9s sur les diff\u00e9rents b\u00e2timents ;\n", "des tests des diff\u00e9rents mod\u00e8les supervis\u00e9s visant \u00e0 pr\u00e9dire la consommation en \u00e9nergie des b\u00e2timents ;\n", "la d\u00e9termination des facteurs principaux impactant le plus le mod\u00e8le que tu auras s\u00e9lectionn\u00e9.\n"]}, {"cell_type": "markdown", "metadata": {}, "source": ["# Analyse Exploratoire"]}, {"cell_type": "markdown", "metadata": {}, "source": ["### Import des modules"]}, {"cell_type": "code", "execution_count": null, "metadata": {}, "outputs": [], "source": ["import pandas as pd\n", "import matplotlib.pyplot as plt\n", "import seaborn as sns "]}, {"cell_type": "markdown", "metadata": {}, "source": ["### Analyse Exploratoire"]}, {"cell_type": "code", "execution_count": null, "metadata": {}, "outputs": [], "source": ["building_consumption = pd.read_csv(# Completer ici)"]}, {"cell_type": "code", "execution_count": null, "metadata": {}, "outputs": [], "source": ["# On regarde comment un batiment est d\u00e9fini dans ce jeu de donn\u00e9es \n", "building_consumption.head()"]}, {"cell_type": "code", "execution_count": null, "metadata": {}, "outputs": [], "source": ["# On regarde le nombre de valeurs manquantes par colonne ainsi que leur type \n", "building_consumption.info()"]}, {"cell_type": "markdown", "metadata": {}, "source": ["#### TERMINER L'ANALYSE EXPLORATOIRE "]}, {"cell_type": "markdown", "metadata": {}, "source": ["A r\u00e9aliser : \n", "- Une analyse descriptive des donn\u00e9es, y compris une explication du sens des colonnes gard\u00e9es, des arguments derri\u00e8re la suppression de lignes ou de colonnes, des statistiques descriptives et des visualisations pertinentes."]}, {"cell_type": "markdown", "metadata": {}, "source": ["Qelques pistes d'analyse : "]}, {"cell_type": "markdown", "metadata": {}, "source": ["* Identifier les colonnes avec une majorit\u00e9 de valeurs manquantes ou constantes en utilisant la m\u00e9thode value_counts() de Pandas\n", "* Mettre en evidence les diff\u00e9rences entre les immeubles mono et multi-usages\n", "* Utiliser des pairplots et des boxplots pour faire ressortir les outliers ou des batiments avec des valeurs peu coh\u00e9rentes d'un point de vue m\u00e9tier "]}, {"cell_type": "markdown", "metadata": {}, "source": ["Pour vous inspirer, ou comprendre l'esprit recherch\u00e9 dans une analyse exploratoire, vous pouvez consulter ce notebook en ligne : https://www.kaggle.com/code/pmarcelino/comprehensive-data-exploration-with-python. Il ne s'agit pas d'un mod\u00e8le \u00e0 suivre \u00e0 la lettre ni d'un template d'analyses attendues pour ce projet. "]}, {"cell_type": "markdown", "metadata": {}, "source": ["# Mod\u00e9lisation "]}, {"cell_type": "markdown", "metadata": {}, "source": ["### Import des modules "]}, {"cell_type": "code", "execution_count": null, "metadata": {}, "outputs": [], "source": ["#Selection\n", "from sklearn.model_selection import (\n", "    train_test_split,\n", "    GridSearchCV, \n", "    cross_validate,\n", ")\n", "from sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error \n", "from sklearn.inspection import permutation_importance\n", "\n", "#Preprocess\n", "from sklearn.compose import ColumnTransformer\n", "from sklearn.preprocessing import LabelEncoder, OneHotEncoder, StandardScaler\n", "\n", "#Mod\u00e8les\n", "from sklearn.dummy import DummyRegressor\n", "from sklearn.linear_model import LinearRegression\n", "from sklearn.svm import SVR\n", "from sklearn.ensemble import RandomForestRegressor\n"]}, {"cell_type": "markdown", "metadata": {}, "source": ["### Feature Engineering"]}, {"cell_type": "markdown", "metadata": {}, "source": ["A r\u00e9aliser : Enrichir le jeu de donn\u00e9es actuel avec de nouvelles features issues de celles existantes. "]}, {"cell_type": "markdown", "metadata": {}, "source": ["En r\u00e8gle g\u00e9n\u00e9rale : On utilise la m\u00e9thode .apply() de Pandas pour cr\u00e9er une nouvelle colonne \u00e0 partir d'une colonne existante. N'h\u00e9sitez pas \u00e0 regarder les exemples dans les chapitres de cours donn\u00e9s en ressource"]}, {"cell_type": "code", "execution_count": null, "metadata": {}, "outputs": [], "source": ["# CODE FEATURE ENGINEERING"]}, {"cell_type": "markdown", "metadata": {}, "source": ["### Pr\u00e9paration des features pour la mod\u00e9lisation"]}, {"cell_type": "markdown", "metadata": {}, "source": ["A r\u00e9aliser :\n", "* Si ce n'est pas d\u00e9j\u00e0 fait, supprimer toutes les colonnes peu pertinentes pour la mod\u00e9lisation.\n", "* Tracer la distribution de la cible pour vous familiariser avec l'ordre de grandeur. En cas d'outliers, mettez en place une d\u00e9marche pour les supprimer.\n", "* D\u00e9barrassez-vous des features redondantes en utilisant une matrice de corr\u00e9lation de Pearson. Pour cela, utiisez la m\u00e9thode corr() de Pandas, coupl\u00e9 d'un graphique Heatmap de la librairie Seaborn \n", "* R\u00e9alisez diff\u00e9rents graphiques pour comprendre le lien entre vos features et la target (boxplots, scatterplots, pairplot si votre nombre de features num\u00e9riques n'est pas tr\u00e8s \u00e9lev\u00e9).\n", "* \u00a0S\u00e9parez votre jeu de donn\u00e9es en un Pandas DataFrame X (ensemble de feautures) et Pandas Series y (votre target).\n", "* Si vous avez des features cat\u00e9gorielles, il faut les encoder pour que votre mod\u00e8le fonctionne. Les deux m\u00e9thodes d'encodage \u00e0 connaitre sont le OneHotEncoder et le LabelEncoder"]}, {"cell_type": "code", "execution_count": null, "metadata": {}, "outputs": [], "source": ["# CODE PREPARATION DES FEATURES"]}, {"cell_type": "markdown", "metadata": {}, "source": ["### Comparaison de diff\u00e9rents mod\u00e8les supervis\u00e9s"]}, {"cell_type": "markdown", "metadata": {}, "source": ["A r\u00e9aliser :\n", "* Pour chaque algorithme que vous allez tester, vous devez :\n", "    * R\u00e9aliser au pr\u00e9alable une s\u00e9paration en jeu d'apprentissage et jeu de test via une validation crois\u00e9e.\n", "    * Si les features quantitatives que vous souhaitez utiliser ont des ordres de grandeur tr\u00e8s diff\u00e9rents les uns des autres, et que vous utilisez un algorithme de regression qui est sensible \u00e0 cette diff\u00e9rence, alors il faut r\u00e9aliser un scaling (normalisation) de la donn\u00e9e au pr\u00e9alable.\n", "    * Entrainer le mod\u00e8le sur le jeu de Train\n", "    * Pr\u00e9dire la cible sur la donn\u00e9e de test (nous appelons cette \u00e9tape, l'inf\u00e9rence).\n", "    * Calculer les m\u00e9triques de performance R2, MAE et RMSE sur le jeu de train et de test.\n", "    * Interpr\u00e9ter les r\u00e9sultats pour juger de la fiabilit\u00e9 de l'algorithme.\n", "* Vous pouvez choisir par exemple de tester un mod\u00e8le lin\u00e9aire, un mod\u00e8le \u00e0 base d'arbres et un mod\u00e8le de type SVM\n", "* D\u00e9terminer le mod\u00e8le le plus performant parmi ceux test\u00e9s."]}, {"cell_type": "code", "execution_count": 1, "metadata": {}, "outputs": [], "source": ["# CODE COMPARAISON DES MODELES"]}, {"cell_type": "markdown", "metadata": {}, "source": ["### Optimisation et interpr\u00e9tation du mod\u00e8le"]}, {"cell_type": "markdown", "metadata": {}, "source": ["A r\u00e9aliser :\n", "* Reprennez le meilleur algorithme que vous avez s\u00e9curis\u00e9 via l'\u00e9tape pr\u00e9c\u00e9dente, et r\u00e9alisez une GridSearch de petite taille sur au moins 3 hyperparam\u00e8tres.\n", "* Si le meilleur mod\u00e8le fait partie de la famille des mod\u00e8les \u00e0 arbres (RandomForest, GradientBoosting) alors utilisez la fonctionnalit\u00e9 feature importance pour identifier les features les plus impactantes sur la performance du mod\u00e8le. Sinon, utilisez la m\u00e9thode Permutation Importance de sklearn."]}, {"cell_type": "code", "execution_count": null, "metadata": {}, "outputs": [], "source": ["# CODE OPTIMISATION ET INTERPRETATION DU MODELE"]}], "metadata": {"kernelspec": {"display_name": "oc_sql", "language": "python", "name": "oc_sql"}, "language_info": {"codemirror_mode": {"name": "ipython", "version": 3}, "file_extension": ".py", "mimetype": "text/x-python", "name": "python", "nbconvert_exporter": "python", "pygments_lexer": "ipython3", "version": "3.11.5"}}, "nbformat": 4, "nbformat_minor": 2}